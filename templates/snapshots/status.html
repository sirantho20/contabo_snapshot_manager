{% extends 'snapshots/base.html' %}

{% block title %}Status - Contabo Snapshot Manager{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h2>Task Status</h2>
        
        <!-- Scheduled Tasks -->
        <div class="card status-card">
            <div class="card-header">
                <h5>Scheduled Tasks (Cron)</h5>
            </div>
            <div class="card-body">
                <div class="task-status">
                    <strong>Current Cron Schedule</strong><br>
                    <small class="text-muted">
                        Schedule: {{ cron_schedule }}<br>
                        Environment Variable: CRON_SCHEDULE={{ cron_schedule }}
                    </small>
                </div>
                <hr>
                {% if scheduled_tasks %}
                    {% for task in scheduled_tasks %}
                    <div class="task-status">
                        <strong>Cron Job</strong><br>
                        <small class="text-muted">
                            Schedule: {{ task }}<br>
                            Runs according to the CRON_SCHEDULE environment variable
                        </small>
                    </div>
                    {% endfor %}
                {% else %}
                    <p class="text-muted">No scheduled tasks found.</p>
                {% endif %}
            </div>
        </div>
        
        <!-- Recent Executions -->
        <div class="card status-card">
            <div class="card-header">
                <h5>Recent Executions (Docker Logs)</h5>
            </div>
            <div class="card-body">
                {% if recent_executions %}
                    {% for execution in recent_executions %}
                    <div class="task-status">
                        <small class="text-muted">
                            {{ execution }}
                        </small>
                    </div>
                    {% if not forloop.last %}<hr>{% endif %}
                    {% endfor %}
                {% else %}
                    <p class="text-muted">No recent executions found.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %} 